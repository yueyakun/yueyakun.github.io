(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{535:function(t,a,e){"use strict";e.r(a);var s=e(4),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[e("a",{attrs:{href:"https://docs.spring.io/spring-cloud-gateway/docs/3.0.2/reference/html",target:"_blank",rel:"noopener noreferrer"}},[t._v("3.0.2英文文档地址"),e("OutboundLink")],1)]),t._v(" "),e("h1",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),e("p",[t._v("Spring Cloud Gateway旨在提供一种简单而有效的方式来路由api，并为它们提供切入点，如：安全性、监控/度量和弹性。")]),t._v(" "),e("h1",{attrs:{id:"_1-引入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-引入"}},[t._v("#")]),t._v(" 1. 引入")]),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-gateway"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h1",{attrs:{id:"_2-术语"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-术语"}},[t._v("#")]),t._v(" 2. 术语")]),t._v(" "),e("p",[t._v("Route：构建网关的基础，包含一个id，一个uri，一组断言（predicates）和一组过滤器（Filter）。断言组合如果为true，则路由匹配。")]),t._v(" "),e("p",[t._v("Predicate：实际上就是 Java 8 中 Predicate 接口的实例，输入类型为 ServerWebExchange。通过他可以匹配来自HTTP请求的任何内容，例如头或参数。")]),t._v(" "),e("p",[t._v("Filter：Spring Cloud 中 GatewayFilter 接口的实例，由特定的工厂类创建。")]),t._v(" "),e("p",[e("em",[t._v("注：ServerWebExchange：Since 5.0，提供对HTTP请求和响应的访问。")])]),t._v(" "),e("h1",{attrs:{id:"_3-工作流程："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-工作流程："}},[t._v("#")]),t._v(" 3. 工作流程：")]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2021/2021-04-20-Spring-Cloud-Gateway-Docs-Note/01.png",alt:""}})]),t._v(" "),e("p",[t._v("客户端向Spring Cloud Gateway 发出请求。如果网关处理程序映射确定请求与路由匹配，则将请求发送到网关 Web 处理程序。此处理程序通过特定的过滤器链运行请求。过滤器被虚线分隔的原因是：过滤器可以在发送代理请求之前和之后运行“pre”过滤逻辑。然后发出代理请求。发出代理请求后，将运行“post”过滤逻辑。")]),t._v(" "),e("h1",{attrs:{id:"_4-配置断言和过滤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置断言和过滤"}},[t._v("#")]),t._v(" 4. 配置断言和过滤")]),t._v(" "),e("h2",{attrs:{id:"_4-1-快捷配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-快捷配置"}},[t._v("#")]),t._v(" 4.1. 快捷配置")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" after_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Cookie=mycookie"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mycookievalue\n")])])]),e("h2",{attrs:{id:"_4-2-完整配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-完整配置"}},[t._v("#")]),t._v(" 4.2. 完整配置")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" after_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Cookie\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mycookie\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("regexp")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mycookievalue\n")])])]),e("h1",{attrs:{id:"_5-路由断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-路由断言"}},[t._v("#")]),t._v(" 5. 路由断言")]),t._v(" "),e("h2",{attrs:{id:"_5-1-after断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-after断言"}},[t._v("#")]),t._v(" 5.1. After断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" after_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" After=2017"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("20T17"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("42"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("47.789"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("07"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("00"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("America/Denver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("h2",{attrs:{id:"_5-2-before断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-before断言"}},[t._v("#")]),t._v(" 5.2. Before断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" before_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Before=2017"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("20T17"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("42"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("47.789"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("07"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("00"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("America/Denver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("h2",{attrs:{id:"_5-3-between断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-between断言"}},[t._v("#")]),t._v(" 5.3. Between断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" between_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Between=2017"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("20T17"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("42"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("47.789"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("07"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("00"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("America/Denver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 2017"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("21T17"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("42"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("47.789"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("07"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("00"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("America/Denver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("h2",{attrs:{id:"_5-4-cookie断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-cookie断言"}},[t._v("#")]),t._v(" 5.4. Cookie断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cookie_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Cookie=chocolate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ch.p\n")])])]),e("h2",{attrs:{id:"_5-5-header断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-header断言"}},[t._v("#")]),t._v(" 5.5. Header断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" header_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Header=X"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \\d+\n")])])]),e("h2",{attrs:{id:"_5-6-host断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-host断言"}},[t._v("#")]),t._v(" 5.6. Host断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" host_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Host="),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("**.somehost.org")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("**.anotherhost.org")]),t._v("\n")])])]),e("p",[t._v("URI 模板参数也是支持的，比如：{sub}.myhost.org，可以匹配 Header 中 Host 是 www.somehost.org 和beta.somehost.org。这些模板参数会被存储起来，在后面的过滤器链中可以通过 ServerWebExchange.getAttributes() 方法取到，key值是 ServerWebExchangeUtils.URI_TEMPLATE_VARIABLES_ATTRIBUTE。")]),t._v(" "),e("h2",{attrs:{id:"_5-7-method断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-method断言"}},[t._v("#")]),t._v(" 5.7. Method断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" method_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Method=GET"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("POST\n")])])]),e("h2",{attrs:{id:"_5-8-path断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-8-path断言"}},[t._v("#")]),t._v(" 5.8. Path断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Path=/red/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("segment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("/blue/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("segment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("如果 matchTrailingSlash 设置为 false 的话，则请求路径 /red/1/ 是不匹配上面的路由的。")]),t._v(" "),e("p",[t._v("这些模板参数一样会会被存储起来，在后面的过滤器链中可以通过 ServerWebExchange.getAttributes() 方法取到，key 值是 ServerWebExchangeUtils.URI_TEMPLATE_VARIABLES_ATTRIBUTE。")]),t._v(" "),e("p",[t._v("下面是一个例子：")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),e("span",{pre:!0,attrs:{class:"token generics"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" uriVariables "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerWebExchangeUtils")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPathPredicateVariables")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exchange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" segment "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uriVariables"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"segment"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"_5-9-path断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-9-path断言"}},[t._v("#")]),t._v(" 5.9. Path断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" query_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Query=red"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gree.\n")])])]),e("p",[t._v("gree. 是一个 regexp ，green、greet 都是匹配这个表达式的。")]),t._v(" "),e("h2",{attrs:{id:"_5-10-remoteaddr断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-10-remoteaddr断言"}},[t._v("#")]),t._v(" 5.10. RemoteAddr断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" remoteaddr_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" RemoteAddr=192.168.1.1/24\n")])])]),e("h2",{attrs:{id:"_5-10-修改-remoteaddr-的解析方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-10-修改-remoteaddr-的解析方式"}},[t._v("#")]),t._v(" 5.10. 修改 RemoteAddr 的解析方式")]),t._v(" "),e("p",[t._v("如果 Spring Cloud Gateway 在一个代理服务的后面，那么拿到的 RemoteAddr 可能不是真实的。可以通过自定义一个 RemoteAddressResolver 来解析出真实的 RemoteAddr 。Spring Cloud Gateway 附带了一个非默认的远程地址解析器 -- XForwardedRemoteAddressResolve，它基于 X-Forwarded-For 请求头来解析出真实的远程地址")]),t._v(" "),e("p",[t._v("使用方式：")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RemoteAddressResolver")]),t._v(" resolver "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XForwardedRemoteAddressResolver")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("maxTrustedIndex")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"direct-route"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" r"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("remoteAddr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10.1.1.1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10.10.1.1/24"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://downstream1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"proxied-route"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" r"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("remoteAddr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10.10.1.1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10.10.1.1/24"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://downstream2"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h2",{attrs:{id:"_5-11-weight断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-11-weight断言"}},[t._v("#")]),t._v(" 5.11. Weight断言")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" weight_high\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//weighthigh.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Weight=group1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" weight_low\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//weightlow.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Weight=group1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n")])])]),e("p",[t._v("Weight断言需要提供两个参数，group 和 weight。")]),t._v(" "),e("h1",{attrs:{id:"_6-gatewayfilter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-gatewayfilter"}},[t._v("#")]),t._v(" 6. GatewayFilter")]),t._v(" "),e("h2",{attrs:{id:"_6-1-addrequestheader-过滤器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-addrequestheader-过滤器"}},[t._v("#")]),t._v(" 6.1. AddRequestHeader 过滤器")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" add_request_header_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("filters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" AddRequestHeader=X"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("red"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" blue\n")])])]),e("h1",{attrs:{id:"_7-globalfilter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-globalfilter"}},[t._v("#")]),t._v(" 7. GlobalFilter")]),t._v(" "),e("h1",{attrs:{id:"_8-httpheadersfilters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-httpheadersfilters"}},[t._v("#")]),t._v(" 8. HttpHeadersFilters")]),t._v(" "),e("h1",{attrs:{id:"_9-tls-and-ssl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-tls-and-ssl"}},[t._v("#")]),t._v(" 9. TLS and SSL")]),t._v(" "),e("h1",{attrs:{id:"_10-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-configuration"}},[t._v("#")]),t._v(" 10. Configuration")]),t._v(" "),e("p",[t._v("Spring Cloud Gateway 的配置是由一组 RouteDefinitionLocator 实例驱动的。默认情况下，PropertiesRouteDefinitionLocator 通过使用 Spring Boot 的 @ConfigurationProperties 机制来加载属性。")]),t._v(" "),e("p",[t._v("下面的两种配置方式是等价的：")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" setstatus_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("filters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" SetStatus\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("401")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" setstatusshortcut_route\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("filters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" SetStatus=401\n")])])]),e("h1",{attrs:{id:"_11-配置路由元数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-配置路由元数据"}},[t._v("#")]),t._v(" 11. 配置路由元数据")]),t._v(" "),e("p",[t._v("可以使用元数据为每个路由配置额外的参数：")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" route_with_metadata\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("optionName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OptionValue"')]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("compositeObject")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("iAmNumber")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),e("p",[t._v("可以从一个exchange中获取元数据")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Route")]),t._v(" route "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" exchange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GATEWAY_ROUTE_ATTR"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get all metadata properties")]),t._v("\nroute"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get a single metadata property")]),t._v("\nroute"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someKey"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h1",{attrs:{id:"_12-http-超时配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-http-超时配置"}},[t._v("#")]),t._v(" 12. Http 超时配置")]),t._v(" "),e("h2",{attrs:{id:"_12-1-全局超时配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-全局超时配置"}},[t._v("#")]),t._v(" 12.1. 全局超时配置")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("httpclient")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("connect-timeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("response-timeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5s\n")])])]),e("h2",{attrs:{id:"_12-2-单个路由的超时配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-2-单个路由的超时配置"}},[t._v("#")]),t._v(" 12.2. 单个路由的超时配置")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[t._v("      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" per_route_timeouts\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//example.org\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Path\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pattern")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /delay/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("timeout"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("response-timeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("connect-timeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n")])])]),e("p",[t._v("也可以用 Java Bean 方式配置，单位都是毫秒。")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cloud"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gateway"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouteMetadataUtils")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CONNECT_TIMEOUT_ATTR"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cloud"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gateway"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouteMetadataUtils")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RESPONSE_TIMEOUT_ATTR"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouteLocator")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("customRouteLocator")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouteLocatorBuilder")]),t._v(" routeBuilder"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" routeBuilder"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n               "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" r"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*.somehost.org"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/somepath"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("filters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addRequestHeader")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"header1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"header-value-1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://someuri"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RESPONSE_TIMEOUT_ATTR"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CONNECT_TIMEOUT_ATTR"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n               "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n               "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"_12-3-流式-java-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-3-流式-java-api"}},[t._v("#")]),t._v(" 12.3. 流式 Java API")]),t._v(" "),e("p",[t._v("RouteLocatorBuilder 提供了一套流式的 API，用法如下：")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// static imports from GatewayFilters and RoutePredicates")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouteLocator")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("customRouteLocator")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouteLocatorBuilder")]),t._v(" builder"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThrottleGatewayFilterFactory")]),t._v(" throttle"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" builder"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("routes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" r"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"**.abc.org"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/image/png"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("filters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n                        f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addResponseHeader")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"X-TestHeader"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foobar"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://httpbin.org:80"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" r"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/image/webp"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("filters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n                        f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addResponseHeader")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"X-AnotherHeader"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"baz"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://httpbin.org:80"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" r"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("order")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"**.throttle.org"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/get"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("filters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("throttle"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://httpbin.org:80"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("不仅可以用 and() 连接，还可以用 or()，negate()。")]),t._v(" "),e("h2",{attrs:{id:"_12-4-服务发现路由配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-4-服务发现路由配置"}},[t._v("#")]),t._v(" 12.4. 服务发现路由配置")]),t._v(" "),e("p",[t._v("开启方式：")]),t._v(" "),e("div",{staticClass:"language-properties extra-class"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.enabled")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n")])])]),e("h3",{attrs:{id:"_12-4-1-配置路由，指向注册中心中的其他服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-4-1-配置路由，指向注册中心中的其他服务"}},[t._v("#")]),t._v(" 12.4.1. 配置路由，指向注册中心中的其他服务")]),t._v(" "),e("p",[t._v("默认情况下，网关为使用DiscoveryClient创建的路由定义一个单独的断言和过滤器。默认的断言是一个 Path 断言，模式是：/serviceId/**，serviceId 就是注册中心中的服务 id。")]),t._v(" "),e("p",[t._v("默认的 filter 是一个 rewrite path filter，表达式是：/serviceId/?(?"),e("remaining",[t._v(".*)，重写成：/${remaining}。从而在请求发送到下游之前从路径中剥离服务ID。")])],1),t._v(" "),e("p",[t._v("如果想自定义，可以通过以下参数配置生效：")]),t._v(" "),e("div",{staticClass:"language-properties extra-class"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#spring.cloud.gateway.discovery.locator.predicates[x]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#spring.cloud.gateway.discovery.locator.filters[y]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.predicates[0].name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("Path")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.predicates[0].args[pattern]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("\"'/'+serviceId+'/**'\"")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.predicates[1].name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("Host")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.predicates[1].args[pattern]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("\"'**.foo.com'\"")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.filters[0].name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("CircuitBreaker")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.filters[0].args[name]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("serviceId")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.filters[1].name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("RewritePath")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.filters[1].args[regexp]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("\"'/' + serviceId + '/?(?<remaining>.*)'\"")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.discovery.locator.filters[1].args[replacement]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("\"'/${remaining}'\"")]),t._v("\n")])])]),e("h1",{attrs:{id:"_13-reactor-netty-access-logs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-reactor-netty-access-logs"}},[t._v("#")]),t._v(" 13. Reactor Netty Access Logs")]),t._v(" "),e("p",[t._v("开启 Reactor Netty 日志的设置是：-Dreactor.netty.http.server.accessLogEnabled=true")]),t._v(" "),e("p",[t._v("注意这是一个 JVM 配置。")]),t._v(" "),e("p",[t._v("logback 示例配置：")]),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("appender")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("accessLog"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ch.qos.logback.core.FileAppender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("file")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("access_log.log"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("file")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("encoder")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("pattern")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("%msg%n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("pattern")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("encoder")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("appender")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("appender")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("async"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ch.qos.logback.classic.AsyncAppender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("appender-ref")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("accessLog"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("appender")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logger")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("reactor.netty.http.server.AccessLog"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("level")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("INFO"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("additivity")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("appender-ref")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("async"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("logger")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h1",{attrs:{id:"_14-cors-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_14-cors-configuration"}},[t._v("#")]),t._v(" 14. CORS Configuration")]),t._v(" "),e("p",[t._v("可以通过配置 Gateway 控制 CORS 行为。下面是一个全局的 CORS 配置示例：")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("globalcors")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cors-configurations")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          '"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/"),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("'"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("allowedOrigins")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://docs.spring.io"')]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("allowedMethods")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GET\n")])])]),e("p",[t._v("要为没有被网关路由断言处理的请求提供相同的 CORS 配置，请设置下面属性为 true。")]),t._v(" "),e("div",{staticClass:"language-properties extra-class"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n")])])]),e("p",[t._v("这个设置也可以用来支撑 CORS 预检查接口，（预检查接口的请求类型是 options）。")]),t._v(" "),e("h1",{attrs:{id:"_15-actuator-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-actuator-api"}},[t._v("#")]),t._v(" 15. Actuator API")]),t._v(" "),e("p",[t._v("下面的配置可以开启 /gateway 端点，")]),t._v(" "),e("div",{staticClass:"language-properties extra-class"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("management.endpoint.gateway.enabled")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true # default value")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("management.endpoints.web.exposure.include")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("gateway")]),t._v("\n")])])]),e("h2",{attrs:{id:"_15-1-检索路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-1-检索路由"}},[t._v("#")]),t._v(" 15.1. 检索路由")]),t._v(" "),e("p",[t._v("/actuator/gateway/routes")]),t._v(" "),e("p",[t._v("访问这个端点可以展示详细的 route 信息？")]),t._v(" "),e("p",[t._v("不想暴露详细的 route 信息可以通过以下配置关闭：")]),t._v(" "),e("div",{staticClass:"language-properties extra-class"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.gateway.actuator.verbose.enabled")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("false")]),t._v("\n")])])]),e("h2",{attrs:{id:"_15-2-检索过滤器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-检索过滤器"}},[t._v("#")]),t._v(" 15.2. 检索过滤器")]),t._v(" "),e("h3",{attrs:{id:"_15-2-1-检索全局过滤器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-1-检索全局过滤器"}},[t._v("#")]),t._v(" 15.2.1. 检索全局过滤器")]),t._v(" "),e("p",[t._v("/actuator/gateway/globalfilters")]),t._v(" "),e("h3",{attrs:{id:"_15-2-2-检索路由过滤器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-2-检索路由过滤器"}},[t._v("#")]),t._v(" 15.2.2. 检索路由过滤器")]),t._v(" "),e("p",[t._v("/actuator/gateway/routefilters")]),t._v(" "),e("h2",{attrs:{id:"_15-3-刷新-route-缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-3-刷新-route-缓存"}},[t._v("#")]),t._v(" 15.3. 刷新 Route 缓存")]),t._v(" "),e("p",[t._v("/actuator/gateway/refresh，POST")]),t._v(" "),e("h2",{attrs:{id:"_15-4-检索路由配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-4-检索路由配置"}},[t._v("#")]),t._v(" 15.4. 检索路由配置")]),t._v(" "),e("p",[t._v("/actuator/gateway/routes")]),t._v(" "),e("h2",{attrs:{id:"_15-5-检索单个路由配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-5-检索单个路由配置"}},[t._v("#")]),t._v(" 15.5. 检索单个路由配置")]),t._v(" "),e("p",[t._v("/actuator/gateway/routes/{id}")]),t._v(" "),e("h2",{attrs:{id:"_15-6-创建或者删除单个路由配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-6-创建或者删除单个路由配置"}},[t._v("#")]),t._v(" 15.6. 创建或者删除单个路由配置")]),t._v(" "),e("p",[t._v("/gateway/routes/{id_route_to_create}，POST")]),t._v(" "),e("p",[t._v("/gateway/routes/{id_route_to_create}，DELETE")]),t._v(" "),e("h2",{attrs:{id:"_15-7-所有端点的列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-7-所有端点的列表"}},[t._v("#")]),t._v(" 15.7. 所有端点的列表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("ID")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("HTTP Method")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("globalfilters")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("GET")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Displays the list of global filters applied to the routes.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("routefilters")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("GET")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Displays the list of "),e("code",[t._v("GatewayFilter")]),t._v(" factories applied to a particular route.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("refresh")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("POST")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Clears the routes cache.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("routes")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("GET")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Displays the list of routes defined in the gateway.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("routes/{id}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("GET")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Displays information about a particular route.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("routes/{id}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("POST")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Adds a new route to the gateway.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("routes/{id}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("DELETE")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Removes an existing route from the gateway.")])])])]),t._v(" "),e("h1",{attrs:{id:"_16-故障排除"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_16-故障排除"}},[t._v("#")]),t._v(" 16. 故障排除")]),t._v(" "),e("h1",{attrs:{id:"_17-开发者指南"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_17-开发者指南"}},[t._v("#")]),t._v(" 17. 开发者指南")]),t._v(" "),e("h2",{attrs:{id:"_17-1-自定义断言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_17-1-自定义断言"}},[t._v("#")]),t._v(" 17.1. 自定义断言")]),t._v(" "),e("h2",{attrs:{id:"_17-2-自定义-gatewayfilter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_17-2-自定义-gatewayfilter"}},[t._v("#")]),t._v(" 17.2. 自定义 GatewayFilter")]),t._v(" "),e("h2",{attrs:{id:"_17-3-自定义-globalfilter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_17-3-自定义-globalfilter"}},[t._v("#")]),t._v(" 17.3. 自定义 GlobalFilter")]),t._v(" "),e("h1",{attrs:{id:"_18-使用-spring-mvc-或者-webflux-创建一个简单的网关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_18-使用-spring-mvc-或者-webflux-创建一个简单的网关"}},[t._v("#")]),t._v(" 18. 使用 Spring MVC 或者 Webflux 创建一个简单的网关")]),t._v(" "),e("h1",{attrs:{id:"_19-配置项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_19-配置项"}},[t._v("#")]),t._v(" 19. 配置项")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("Name")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("Default")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.default-filters")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("List of filter definitions that are applied to every route.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.discovery.locator.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("false")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Flag that enables DiscoveryClient gateway integration.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.discovery.locator.filters")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.discovery.locator.include-expression")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("SpEL expression that will evaluate whether to include a service in gateway integration or not, defaults to: true.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.discovery.locator.lower-case-service-id")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("false")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Option to lower case serviceId in predicates and filters, defaults to false. Useful with eureka when it automatically uppercases serviceId. so MYSERIVCE, would match /myservice/**")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.discovery.locator.predicates")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.discovery.locator.route-id-prefix")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v('The prefix for the routeId, defaults to discoveryClient.getClass().getSimpleName() + "_". Service Id will be appended to create the routeId.')])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.discovery.locator.url-expression")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("'lb://'+serviceId")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("SpEL expression that create the uri for each route, defaults to: 'lb://'+serviceId.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables gateway functionality.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.fail-on-route-definition-error")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Option to fail on route definition errors, defaults to true. Otherwise, a warning is logged.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.add-request-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the add-request-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.add-request-parameter.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the add-request-parameter filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.add-response-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the add-response-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.circuit-breaker.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the circuit-breaker filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.dedupe-response-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the dedupe-response-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.fallback-headers.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the fallback-headers filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.hystrix.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the hystrix filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.map-request-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the map-request-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.modify-request-body.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the modify-request-body filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.modify-response-body.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the modify-response-body filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.prefix-path.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the prefix-path filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.preserve-host-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the preserve-host-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.redirect-to.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the redirect-to filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.remove-hop-by-hop.headers")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.remove-hop-by-hop.order")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.remove-request-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the remove-request-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.remove-request-parameter.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the remove-request-parameter filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.remove-response-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the remove-response-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.request-header-size.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the request-header-size filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.request-header-to-request-uri.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the request-header-to-request-uri filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.request-rate-limiter.deny-empty-key")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Switch to deny requests if the Key Resolver returns an empty key, defaults to true.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.request-rate-limiter.empty-key-status-code")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HttpStatus to return when denyEmptyKey is true, defaults to FORBIDDEN.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.request-rate-limiter.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the request-rate-limiter filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.request-size.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the request-size filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.retry.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the retry filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.rewrite-location-response-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the rewrite-location-response-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.rewrite-location.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the rewrite-location filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.rewrite-path.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the rewrite-path filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.rewrite-response-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the rewrite-response-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.save-session.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the save-session filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.content-security-policy")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("default-src 'self' https:; font-src 'self' https: data:; img-src 'self' https: data:; object-src 'none'; script-src https:; style-src 'self' https: 'unsafe-inline'")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.content-type-options")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("nosniff")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.disable")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.download-options")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("noopen")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the secure-headers filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.frame-options")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("DENY")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.permitted-cross-domain-policies")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("none")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.referrer-policy")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("no-referrer")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.strict-transport-security")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("max-age=631138519")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.secure-headers.xss-protection-header")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("1 ; mode=block")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.set-path.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the set-path filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.set-request-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the set-request-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.set-request-host-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the set-request-host-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.set-response-header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the set-response-header filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.set-status.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the set-status filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.filter.strip-prefix.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the strip-prefix filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.forwarded.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the ForwardedHeadersFilter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.adapt-cached-body.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the adapt-cached-body global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.forward-path.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the forward-path global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.forward-routing.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the forward-routing global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.load-balancer-client.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the load-balancer-client global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.netty-routing.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the netty-routing global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.netty-write-response.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the netty-write-response global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.reactive-load-balancer-client.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the reactive-load-balancer-client global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.remove-cached-body.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the remove-cached-body global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.route-to-request-url.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the route-to-request-url global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.global-filter.websocket-routing.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the websocket-routing global filter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("false")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If global CORS config should be added to the URL handler.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.globalcors.cors-configurations")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.compression")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("false")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables compression for Netty HttpClient.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.connect-timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The connect timeout in millis, the default is 45s.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.max-header-size")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The max response header size.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.max-initial-line-length")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The max initial line length.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.pool.acquire-timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Only for type FIXED, the maximum time in millis to wait for aquiring.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.pool.max-connections")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Only for type FIXED, the maximum number of connections before starting pending acquisition on existing ones.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.pool.max-idle-time")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Time in millis after which the channel will be closed. If NULL, there is no max idle time.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.pool.max-life-time")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Duration after which the channel will be closed. If NULL, there is no max life time.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.pool.name")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("proxy")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The channel pool map name, defaults to proxy.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.pool.type")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Type of pool for HttpClient to use, defaults to ELASTIC.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.proxy.host")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Hostname for proxy configuration of Netty HttpClient.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.proxy.non-proxy-hosts-pattern")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Regular expression (Java) for a configured list of hosts. that should be reached directly, bypassing the proxy")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.proxy.password")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Password for proxy configuration of Netty HttpClient.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.proxy.port")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Port for proxy configuration of Netty HttpClient.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.proxy.type")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("proxyType for proxy configuration of Netty HttpClient.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.proxy.username")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Username for proxy configuration of Netty HttpClient.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.response-timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The response timeout.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.close-notify-flush-timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("3000ms")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("SSL close_notify flush timeout. Default to 3000 ms.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.close-notify-read-timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("SSL close_notify read timeout. Default to 0 ms.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.default-configuration-type")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The default ssl configuration type. Defaults to TCP.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.handshake-timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("10000ms")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("SSL handshake timeout. Default to 10000 ms")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.key-password")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Key password, default is same as keyStorePassword.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.key-store")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Keystore path for Netty HttpClient.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.key-store-password")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Keystore password.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.key-store-provider")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Keystore provider for Netty HttpClient, optional field.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.key-store-type")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("JKS")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Keystore type for Netty HttpClient, default is JKS.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.trusted-x509-certificates")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Trusted certificates for verifying the remote endpoint’s certificate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.ssl.use-insecure-trust-manager")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("false")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Installs the netty InsecureTrustManagerFactory. This is insecure and not suitable for production.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.websocket.max-frame-payload-length")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Max frame payload length.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.websocket.proxy-ping")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Proxy ping frames to downstream services, defaults to true.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpclient.wiretap")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("false")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables wiretap debugging for Netty HttpClient.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.httpserver.wiretap")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("false")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables wiretap debugging for Netty HttpServer.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.loadbalancer.use404")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("false")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.metrics.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("false")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the collection of metrics data.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.metrics.prefix")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("spring.cloud.gateway")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The prefix of all metrics emitted by gateway.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.metrics.tags")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Tags map that added to metrics.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.after.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the after predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.before.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the before predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.between.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the between predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.cloud-foundry-route-service.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the cloud-foundry-route-service predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.cookie.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the cookie predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.header.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the header predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.host.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the host predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.method.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the method predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.path.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the path predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.query.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the query predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.read-body.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the read-body predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.remote-addr.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the remote-addr predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.predicate.weight.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Enables the weight predicate.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.redis-rate-limiter.burst-capacity-header")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("X-RateLimit-Burst-Capacity")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The name of the header that returns the burst capacity configuration.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.redis-rate-limiter.config")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.redis-rate-limiter.include-headers")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Whether or not to include headers containing rate limiter information, defaults to true.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.redis-rate-limiter.remaining-header")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("X-RateLimit-Remaining")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The name of the header that returns number of remaining requests during the current second.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.redis-rate-limiter.replenish-rate-header")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("X-RateLimit-Replenish-Rate")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The name of the header that returns the replenish rate configuration.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.redis-rate-limiter.requested-tokens-header")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("X-RateLimit-Requested-Tokens")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The name of the header that returns the requested tokens configuration.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.routes")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("List of Routes.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.set-status.original-status-header-name")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The name of the header which contains http code of the proxied request.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.streaming-media-types")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If the XForwardedHeadersFilter is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.for-append")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If appending X-Forwarded-For as a list is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.for-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If X-Forwarded-For is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.host-append")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If appending X-Forwarded-Host as a list is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.host-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If X-Forwarded-Host is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.order")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The order of the XForwardedHeadersFilter.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.port-append")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If appending X-Forwarded-Port as a list is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.port-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If X-Forwarded-Port is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.prefix-append")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If appending X-Forwarded-Prefix as a list is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.prefix-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If X-Forwarded-Prefix is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.proto-append")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If appending X-Forwarded-Proto as a list is enabled.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("spring.cloud.gateway.x-forwarded.proto-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("true")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("If X-Forwarded-Proto is enabled.")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);