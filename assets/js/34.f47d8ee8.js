(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{522:function(t,a,e){"use strict";e.r(a);var s=e(4),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),e("p",[t._v("JMeter 是 Apache 基金会下的一个开源性能测试工具，用来测试部署在服务器端的应用程序的性能。使用 JMeter 对 Spring Boot 接口进行压力测试十分方便快捷。")]),t._v(" "),e("h2",{attrs:{id:"下载安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载安装"}},[t._v("#")]),t._v(" 下载安装")]),t._v(" "),e("p",[t._v("JMeter 与 Maven 类似，是一款免安装软件，下载安装包解压后即可直接使用。")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://jmeter.apache.org/download_jmeter.cgi",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网下载地址"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("strong",[t._v("注意：JMeter 是一款 Java 应用，依赖 JDK 运行，使用前需先安装好 JDK")])]),t._v(" "),e("h2",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),e("p",[t._v("安装包解压后目录如下图所示，Windows 系统下启动文件是 bin\\jmeter.bat。双击该文件即可启动 JMeter 的 GUI 界面。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/01.png",alt:""}})]),t._v(" "),e("p",[t._v("GUI 界面如下图所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/02.png",alt:""}})]),t._v(" "),e("p",[t._v("除了 GUI 界面外一同打开的还有一个命令行界面：")]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/03.png",alt:""}})]),t._v(" "),e("p",[t._v("这是一个提示信息，提示信息的意思是：不要使用GUI运行压力测试，GUI仅用于压力测试的创建和调试。\n运行压测请使用命令行的方式进行，测试命令是："),e("em",[t._v("jmeter -n -t [jmx file] -l [results file] -e -o [Path to web report folder]。")]),t._v("  如果测试需要，你可以修改批处理文件中的 HEAP 属性来提高 Java 堆的大小。")]),t._v(" "),e("p",[e("strong",[t._v("注意：这个 cmd 窗口不可以关闭，如果关闭的话会连同 GUI 界面一起关闭")])]),t._v(" "),e("h2",{attrs:{id:"修改默认语言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改默认语言"}},[t._v("#")]),t._v(" 修改默认语言")]),t._v(" "),e("p",[t._v("临时修改：依次点击 Options → Choose Language → Chinese(Simplified)。")]),t._v(" "),e("p",[t._v("永久修改：使用编辑器打开 \\bin 目录下的 jmeter.properties 文件，在 "),e("em",[t._v("#language=en")]),t._v(" 下增加一行 "),e("em",[t._v("language=zh_CN")]),t._v(" 配置，重启 JMeter。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/04.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"修改默认编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改默认编码"}},[t._v("#")]),t._v(" 修改默认编码")]),t._v(" "),e("p",[t._v("使用编辑器打开 \\bin 目录下的 jmeter.properties 文件，\n在 "),e("em",[t._v("#sampleresult.default.encoding=ISO-8859-1")]),t._v("  后面增加一行 "),e("em",[t._v("sampleresult.default.encoding=utf-8")]),t._v(" 配置，重启 JMeter。")]),t._v(" "),e("h2",{attrs:{id:"创建测试脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建测试脚本"}},[t._v("#")]),t._v(" 创建测试脚本")]),t._v(" "),e("p",[t._v("创建测试脚本之前应该已经有一个要测试的接口了，为了方便起见我这里直接使用百度搜索的接口，帮百度压测一把，哈哈，，，")]),t._v(" "),e("ul",[e("li",[t._v("修改测试计划名称为 baidu_load_test，然后点击保存按钮。新建一个 baidu_load_test 文件夹来保存压测脚本。")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/05.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"添加测试线程组（用户组）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加测试线程组（用户组）"}},[t._v("#")]),t._v(" 添加测试线程组（用户组）")]),t._v(" "),e("p",[t._v("JMeter 是通过创建多个线程来模拟多用户同时访问接口的，所以线程组也可以说是用户组。")]),t._v(" "),e("ul",[e("li",[t._v('右键点击 "baidu_load_test” → “添加” → “线程（用户）” → “线程组”')])]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/06.png",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("配置线程组")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/07.png",alt:""}})]),t._v(" "),e("p",[t._v("线程组主要配置参数解析：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("1. 线程数：启动多少个线程（用户）来模拟访问操作\n2. Ramp-Up 时间（秒）：访问的时间跨度，单位是秒。比如 100 个线程，时间跨度设置成 5 ，那么这 100 个线程会散列在 5 秒内启动访问，每秒钟也就是 20 次访问。\n3. 循环次数：每个线程（用户）循环访问几次接口。\n")])])]),e("h3",{attrs:{id:"添加测试接口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加测试接口"}},[t._v("#")]),t._v(" 添加测试接口")]),t._v(" "),e("ul",[e("li",[t._v("右键点击 “线程组” → “添加” → “取样器” → “HTTP请求”")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/08.png",alt:""}})]),t._v(" "),e("p",[t._v("HTTP请求参数比较简单，不在一一解释。")]),t._v(" "),e("h3",{attrs:{id:"添加查看结果树"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加查看结果树"}},[t._v("#")]),t._v(" 添加查看结果树")]),t._v(" "),e("ul",[e("li",[t._v("右键点击 “线程组” → “添加” → “监听器” → “察看结果树”")])]),t._v(" "),e("p",[t._v("创建完查看结果树后点击 运行 按钮即可在此页面看到请求结果了。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/09.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"创建汇总报告"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建汇总报告"}},[t._v("#")]),t._v(" 创建汇总报告")]),t._v(" "),e("ul",[e("li",[t._v("右键点击 “线程组” → “添加” → “监听器” → “汇总报告”")])]),t._v(" "),e("p",[t._v("创建汇总报告后再次点击 运行 按钮启动测试，即可在汇总报告页面看到汇总信息。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/10.png",alt:""}})]),t._v(" "),e("p",[t._v("汇总报告主要信息解析：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("样本：请求总次数\n平均值：平均响应时间\n最小值：最小响应时间\n最大值：最大响应时间\n吞吐量：服务器单位时间响应请求量\n")])])]),e("p",[t._v("我此次设置线程总数不多，且时间跨度较大，所以 9.9 的 tps 肯定不是百度的极限，不怕被度年封 IP 的同学可以修改参数，好好帮百度压测一把！")]),t._v(" "),e("h3",{attrs:{id:"命令行方式执行测试脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令行方式执行测试脚本"}},[t._v("#")]),t._v(" 命令行方式执行测试脚本")]),t._v(" "),e("p",[t._v("在 \\bin 目录下打开 cmd 窗口，输入如下命令：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("jmeter -n -t ..\\baidu_load_test\\baidu_load_test.jmx -l ..\\baidu_load_test\\result.txt -e -o ..\\baidu_load_test\\webreport\n")])])]),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/11.png",alt:""}})]),t._v(" "),e("p",[t._v("脚本执行完毕后，在指定文件夹即生成了执行结果和 web 报告。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/12.png",alt:""}})]),t._v(" "),e("p",[t._v("web 报告如下图：")]),t._v(" "),e("p",[e("img",{attrs:{src:"/posts/2020/2020-11-12-jmeter-load-test/13.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"总结："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结："}},[t._v("#")]),t._v(" 总结：")]),t._v(" "),e("p",[t._v("简单本地测试也可以直接使用 GUI 界面进行，大量线程的性能压测最好是保存脚本后上传到服务器进行。上传到服务器进行也可以避免网络对测试结果的影响，压测结果也更准确。")])])}),[],!1,null,null,null);a.default=r.exports}}]);